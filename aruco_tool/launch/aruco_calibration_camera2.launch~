<!--
  This launch file initializes the kobuki with camera and map it in rviz, and detect the marker . 
 -->

<launch>
  <!--Access the camera publish the camera_info and image_row topics-->
  <node pkg="cv_camera" type="cv_camera_node_sync" name="camera1">
    <param name="selfID" value= "1" />
    <param name="frame_id" value="camera1" />
    <param name="device_id" value= "1" />
    <param name="camera_info_url" value="$(find aruco_tool)/Param/camera1.xml"/>
    <param name="rate" value="30.0" />
    <param name="pubRate" value="10.0" />
    <param name="image_width" value="1280" />
    <param name="image_height" value="720" />
  </node>

  <!-- Node to detect the marker on image plane and estimate the pose -->
  <node pkg="aruco_tool" type="arucoCalibration" name="arucoCalibration" output = 'screen'>
    <param name= "selfID" value = "1" />
    <param name= 'camera_cal_path' type = 'string' value="$(find aruco_tool)/Param/camera1.xml"/>
    <param name= 'detector_param_path' type = 'string' value="$(find aruco_tool)/Param/detector_params.yml"/>
    <param name="image_width" value="1280" />
    <param name="image_height" value="720" /> 
    <param name="marker_length" value= "200" />
    <param name="tracker_point" value= "true" />
    <param name="visualize_image" value= "true" />
    <param name="targetID" value= "3" />
    <param name="maxCount" value= "50" />
  </node>

  <node pkg="tracker" type="synchronizer" name= "synchronizer" >
     <param name="frequency" value="10.0" />
  </node>

</launch>
