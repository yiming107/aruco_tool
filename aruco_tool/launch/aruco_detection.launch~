<!--
  This launch file initializes the kobuki with camera and map it in rviz, and detect the marker . 
 -->

<launch>

  <!--Access the camera publish the camera_info and image_row topics-->
  <node pkg="cv_camera" type="cv_camera_node_sync" name="camera1" output = 'screen'>
    <param name = 'selfID' type = 'int' value = '1' />
    <param name="frame_id" value="camera1" />
    <param name="device_id" value= "1" />
    <param name="camera_info_url" value="$(find aruco_tool)/Param/camera1.xml"/>
    <param name="rate" value="40.0" />
    <param name="image_width" value="1280" />
    <param name="image_height" value="720" />
  </node>

  <!-- Node to detect the marker on image plane and estimate the pose -->
  <node pkg="aruco_tool" type="arucoDetectionTopView" name="arucoDetector" >
    <param name = 'selfID' type = 'int' value = '1' />
    <param name = 'videoFrameRate' value = '5.0' />
    <param name= 'camera_cal_path' type = 'string' value="$(find aruco_tool)/Param/camera1.xml"/>
    <param name= 'detector_param_path' type = 'string' value="$(find aruco_tool)/Param/detector_params.yml"/>

    <param name="publish_tf" value="true" />
    <param name="marker_length" value="200" />
    <param name="save_data" value="true" />
    <param name="save_video" value="true" />
    <param name="track_point" value="true" />
    <param name="visualize_image" value="true" />
    <param name="saved_video_name" value="test" />
    <param name="image_width" value="1280" />
    <param name="image_height" value="720" />
    <rosparam command="load" file="$(find exp_setup)/param/markerIDs.yaml" />
  </node>


  <node pkg="tracker" type="synchronizer" name= "synchronizer" >
     <param name="frequency" value="5.0" />
     <param name = "delay" value= "2.0" />
  </node>

</launch>
